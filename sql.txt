

CREATE DATABASE `SCOTT` DEFAULT CHARACTER SET utf8mb4;

USE SCOTT;

CREATE TABLE IF NOT EXISTS `BONUS` ( 
`ENAME` varchar(10) DEFAULT NULL,
`JOB` varchar(9) DEFAULT NULL,
`SAL` double DEFAULT NULL,
`COMM` double DEFAULT NULL);
SELECT*from Bonus;
drop table IF EXISTS dept;

CREATE TABLE IF NOT EXISTS `DEPT` ( 
`DEPTNO` int(11) NOT NULL,
`DNAME` varchar(14) DEFAULT NULL,
`LOC` varchar(13) DEFAULT NULL,
PRIMARY KEY (`DEPTNO`));
SELECT*FROM DEPT;

INSERT INTO `DEPT` (`DEPTNO`,`DNAME`,`LOC`)
VALUES(10, 'ACCOUNTING', 'NEW YORK'),
	  (20, 'RESEARCH', 'DALLAS'),
      (30, 'SALES', 'CHICAGO'),
      (40, 'OPERATIONS', 'BOSTON');

CREATE TABLE IF NOT EXISTS `EMP` ( 
`EMPNO` int(11) NOT NULL,
`ENAME` varchar(10) DEFAULT NULL,
`JOB` varchar(9) DEFAULT NULL,
`MGR` int(11) DEFAULT NULL,
`HIREDATE` datetime DEFAULT NULL,
`SAL` double DEFAULT NULL,
`COMM` double DEFAULT NULL,
`DEPTNO` int(11) DEFAULT NULL,
PRIMARY KEY (`EMPNO`),
KEY `PK_EMP` (`DEPTNO`));

INSERT INTO	`EMP` ( `EMPNO`, `ENAME`, `JOB`, `MGR`, `HIREDATE`, `SAL`, `COMM`, `DEPTNO`)
VALUES 
       (7839, 'KING', 'PRESIDENT', NULL, '1981-11-17 00:00:00', 5000, NULL, 10),
       (7782, 'CLARK', 'MANAGER', 7839, '1981-06-09 00:00:00', 2450, NULL, 10),
       (7934, 'MILLER', 'CLERK', 7782, '1982-01-23 00:00:00', 1300, NULL, 10),
       (7566, 'JONES', 'MANAGER', 7839, '1981-04-02 00:00:00', 2975, NULL, 20),
       (7788, 'SCOTT', 'ANALYST', 7566, '1987-04-19 00:00:00', 3000, NULL, 20),
       (7876, 'ADAMS', 'CLERK', 7788, '1987-05-23 00:00:00', 1100, NULL, 20),
       (7902, 'FORD', 'ANALYST', 7566, '1981-12-03 00:00:00', 3000, NULL, 20),
       (7369, 'SMITH', 'CLERK', 7902, '1980-12-17 00:00:00', 800, NULL, 20),
       (7698, 'BLAKE', 'MANAGER', 7839, '1981-05-01 00:00:00', 2850, NULL, 30),
       (7499, 'ALLEN', 'SALESMAN', 7698, '1981-02-20 00:00:00', 1600, 300, 30),
       (7521, 'WARD', 'SALESMAN', 7698, '1981-02-22 00:00:00', 1250, 500, 30),
	   (7654, 'MARTIN', 'SALESMAN', 7698, '1981-09-28 00:00:00', 1250, 1400, 30),
       (7844, 'TURNER', 'SALESMAN', 7698, '1981-09-08 00:00:00', 1500, 0, 30),
       (7900, 'JAMES', 'CLERK', 7698, '1981-12-03 00:00:00', 950, NULL, 30);
       
select*from EMP;

CREATE TABLE IF NOT EXISTS `SALGRADE` ( 
`GRADE` double DEFAULT NULL,
`LOSAL` double DEFAULT NULL,
`HISAL` double DEFAULT NULL);

INSERT INTO `SALGRADE` (`GRADE`, `LOSAL`, `HISAL`)
VALUES (1, 700, 1200),
       (2, 1201, 1400),
	   (3, 1401, 2000),
       (4, 2001, 3000),
       (5, 3001, 9999);

select*from SALGRADE;
ALTER TABLE `EMP` ADD CONSTRAINT `PK_EMP` FOREIGN KEY (`DEPTNO`) REFERENCES `DEPT` (`DEPTNO`) ON
DELETE SET NULL ON UPDATE CASCADE;


select distinct deptno as 'ë¶€ì„œë²ˆí˜¸' from emp;

select ename ì´ë¦„, empno as 'ì‚¬ë²ˆ', comm ì»¤ë¯¸ì…˜ , sal as ê¸‰ì—¬, sal+ IFNULL(comm,0) as"ì»¤ë¯¸ì…˜ í¬í•¨ê¸‰ì—¬2"
from emp;

-- case function ì¨ë³´ì
select empno, ename, sal,
	case when sal >= 5000 then "ê³ ì•¡ì—°ë´‰"
		when sal >= 2000 then "í‰ê· ì—°ë´‰"
        else "ì§€ì—­ì—°ë´‰"
	end as "ì—°ë´‰ë“±ê¸‰"
from emp ;

-- ë¶€ì„œ ë²ˆí˜¸ê°€ 30ì¸ ì‚¬ì›ì¤‘ ê¸‰ì—¬ê°€ 1500 ì´ìƒì¸ ì‚¬ì›ì˜ì´ë¦„, ê¸‰ì—¬, ë¶€ì„œë²ˆí˜¸ ì¡°íšŒ
select ename, sal, deptno
from emp
where deptno = 30 and sal >= 1500;

select empno, ename, deptno from emp
where Not (deptno = 30 OR deptno = 20);

-- ì—…ë¬´ê°€ manager, analyst, president ì¸ ì‚¬ì›ì˜ ì´ë¦„, ì‚¬ë²ˆ, ì—…ë¬´ ì¡°íšŒ 

select ename, empno, job 
from emp
where job in('manager','analyst','president');

-- ë¶€ì„œ ë²ˆí˜¸ê°€ 10,20ì´ ì•„ë‹Œ ì‚¬ì›ì˜ ì‚¬ë²ˆ, ì´ë¦„, ë¶€ì„œë²ˆí˜¸
select empno, ename, deptno
from emp
where deptno not in(10,20);

-- ê¸‰ì—¬ê°€ 2000ì´ìƒ 3000ì´í•˜ì¸ ì‚¬ëŒì˜ ì‚¬ë²ˆ, ì´ë¦„, ê¸‰ì—¬ì¡°í¬
select empno, ename, sal 
from emp
where sal between 2000 and 3000;

-- ì…ì‚¬ì¼ì´ 1981ë…„ì¸ ì§ì›ìœ¼ ã…£ì‚¬ë²ˆ, ì´ë¦„, ì…ì‚¬ì¼ ì¡°íšŒ
select empno, ename, hiredate
from emp
where hiredate between '1981-01-01' and '1981-12-31';
-- ì´ë¦„ì´ 'A' , 'B' , 'C' ë¡œ ì‹œì‘í•˜ëŠ” ì§ì›ì˜ ì‚¬ë²ˆ, ì´ë¦„ì¡°íšŒ
select empno, ename
from emp 
where ename>'D';  -- ì´ë ‡ê²Œ í•˜ë©´ ë˜ëŠ” êµ¬ë‚˜ ,betwwen 
-- ì»¤ë¯¸ì…˜ì¸ NULL ì¸ì‚¬ì›ì˜ ì‚¬ë²ˆ, ì´ë¦„, ì»¤ë¯¸ì…˜ ì¡°íšŒ
select empno, ename, comm 
from emp
where comm is null;

-- ì´ë¦„ì´ Mìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì‚¬ì›ì˜ ì‚¬ë²ˆ, ì´ë¦„ ì¡°íšŒ 
select empno, ename
from emp
where ename like 'M%';

-- ì´ë¦„ì— E í¬í•¨
select empno, ename
from emp
where ename like '%E%';

-- ì´ë¦„ì˜ ì„¸ë²ˆì§¸ ì•ŒíŒŒë²³ì´ 'A' ì¸ ì‚¬ì›ì˜ ì‚¬ë²ˆ, ì´ë¦„ ì¡°íšŒ
select empno, ename
from emp
where ename like '__A%';

select * from emp
order by ename desc;
-- ê¸‰ì—¬ ë‚´ë¦¼ì°¨ìˆœ
select empno, ename, sal
from emp
order by sal DESC;


-- 20, 30ë²ˆ ë¶€ì„œì— ê·¼ë¬´í•˜ëŠ” ì‚¬ì›ì˜ ì‚¬ë²ˆ, ì´ë¦„, ë¶€ì„œë²ˆí˜¸, ê¸‰ì—¬ ì¡°íšŒ (ë¶€ì„œë³„ ì˜¤ë¦„ì°¨ìˆœ, ê¸‰ì—¬ìˆœ ë‚´ë¦¼ì°¨ìˆœ) 
select empno , ename, deptno, sal
from emp
where deptno IN(20,30)
order by deptno, sal desc;

-- -------------MYSQL ë‚´ì¥í•¨ìˆ˜--------------
-- 2ì˜ 3ì œê³± 
select POW(2,3);
-- ì„ì‹œ í…Œì´ë¸” ì‚¬ìš©
select POW(2,3) from dual;

-- 8ë‚˜ëˆ„ê¸° 3ì˜ ë‚˜ë¨¸ì§€
select mod(8,3) as "8ì„ 3ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€";
-- ìµœëŒ€ê°’ , ìµœì†Œê°’
select greatest(8,17,25,33,192,55,159) , least(99999,433,21,3232,44);

-- ë°˜ì˜¬ë¦¼
select round(1526.159), round(1526.159,1);


-- MYSQL Function ì“°ì 

-- ì•„ìŠ¤í‚¤ ì½”ë“œê°’ ì–»ê¸°
select ascii('0'),ascii('A') ,ascii('a');

-- concat ë©”ì„œë“œë¥¼ ì¨ë³´ì 
select concat('presidentì˜ ì´ë¦„ì€',ename, 'ì…ë‹ˆë‹¤') as 'ì†Œê°œ'
from emp
where job ='president';

-- ì´ë¦„ì˜ ê¸¸ì´ê°€ 5ì¸ ì§ì›ì˜ ì´ë¦„ì„ ì¡°íšŒ
select ename
from emp
where length(ename) = 5;

-- ê¹€ì‹¸í”¼
select length('ê¹€ì‹¸í”¼'),char_length('ê¹€ì‹¸í”¼');

select length('ğŸ˜œ') , char_length('ğŸ’–');

-- ë¬¸ìì—´ ë³€ê²½
select replace('Hello abc abc','abc','ssafy');

-- ë¬¸ìì—´ ì¸ë±ìŠ¤
select instr('hello ssafy','ssafy');
-- ëª¨ë“  ì§ì›ì˜ ì´ë¦„ 3ìë¦¬ ì¡°íšŒ 
select substr(ename, 1, 3)
from emp;

-- LPAD RPAD
select lpad('SSAFY',10,'*') , rpad('SSAFY',10,'*');
-- REVERSE

select reverse('hello SSAFY!');
select reverse('ìš°ì˜ìš°ì—­ì‚¼ì—­ê¸°ëŸ¬ê¸°ì¸ë„ì¸í† ë§ˆí† ë³„ë˜¥ë³„ìŠ¤ìœ„ìŠ¤');

-- ëª¨ë“  ì‚¬ì›ì— ëŒ€í•˜ì—¬ ì‚¬ì›ìˆ˜, ê¸‰ì—¬ì´ì•¡, í‰ê· ê¸‰ì—¬ , ìµœê³ ê¸‰ì—¬, ìµœì €ê¸‰ì—¬ ì¡°íšŒ 

-- ë¶€ì„œë³„ë¡œ ì¡°íšŒí•˜ê³ , 
select deptno ë¶€ì„œ, job ì—…ë¬´,count(*) ì‚¬ì›ìˆ˜, sum(sal) ê¸‰ì—¬ì´ì•¡, ROUND(avg(sal),2) í‰ê· ê¸‰ì—¬, max(sal) ìµœê³ ê¸‰ì—¬, min(sal) ìµœì €ê¸‰ì—¬
from emp
group by deptno,job
order by deptno;


-- ê¸‰ì—¬ (ì»¤ë¯¸ì…˜ í¬í•¨) í‰ê· ì´ 2000 ì´ìƒì¸ ë¶€ì„œë²ˆí˜¸, ë¶€ì„œë³„ ì‚¬ì›ìˆ˜, í‰ê· ê¸‰ì—¬(ì»¤ë¯¸ì…˜ í¬í•¨) ì¡°íšŒ
select deptno, COUNT(*) ì‚¬ì›ìˆ˜ , ROUND(AVG(sal+IFNULL(comm, 0)),2)  "í‰ê· ê¸‰ì—¬(ì»¤ë¯¸ì…˜ í¬í•¨)"
from emp
group by deptno
having AVg(sal+ IFNULL(comm ,0)) >= 2000;


select*
from emp
order by deptno
limit 5;

-- ì˜¤í† ì»¤ë°‹ ë‚˜ ì•ˆí• ë˜ 
set autocommit = 0;

create database ssafy_pjt;

use ssafy_pjt;
drop table usertable;
create table usertable (
	idx int auto_increment primary key,
    userId varchar(30) character set utf8mb4 not null,
    `password` varchar(30) character set utf8mb4 not null,
    name varchar(30) character set utf8mb4 not null,
    nickname varchar(30) character set utf8mb4 ,
    email varchar(50) ,
    createtime timestamp default now()
);

insert into usertable (userId, password, name, nickname,email)
values ("aaa","1234","dhdhdh","hohoho","aaaa@aaaa.com"),
("abb","12345","dhdhdh","hohoho","aaaa@aaaa.com"),
("aac","12346","dhdhdh","hohoho","aaaa@aaaa.com")
;
insert usertable (userId, password, name, nickname,email)
values ("ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€ê°€","1234","dhdhdh","hohoho","aaaa@aaaa.com");
select*from usertable;

select*from usertable where userId = 'yyyyyyyyyyyy' and password='yyyyyyyyyyyyyyyy';

-- board table
create table boardtable (
	idx int auto_increment primary key,
    boardId varchar(50) character set utf8mb4 not null,
    title varchar(50) character set utf8mb4 not null,
    content varchar(200) character set utf8mb4,
    writerIdx int ,
    part varchar(10) character set utf8mb4 not null,
    channelName varchar(50) character set utf8mb4 ,
    url varchar(300) ,
    createtime timestamp default now(),
    foreign key (writerIdx) references usertable(idx)
);
drop table boardtable;
select*from boardtable;
insert into boardtable (boardId, title, content,writerIdx,part,channelName,url)
values ("aaaff","í˜¸ìš°í˜¸ìš°","ì–´í‘¸ì–´í‘¸",15,"ì „ì‹ ","ë•…í¬ë¶€ë¶€","youtube.com");

-- comment table
create table reviewtable(
	idx int auto_increment primary key,
    title varchar(50) character set utf8mb4 not null,
    content varchar(200) character set utf8mb4 ,
    boardIdx int ,
    writerIdx int,
    views int default 0,
    createtime timestamp default now(),
    foreign key(boardIdx) references boardtable(idx),
    foreign key(writerIdx) references usertable(idx)
);

select*from reviewtable;
insert into reviewtable ( title, content,boardIdx,writerIdx)
values ("íœ˜ë¦¬ë¦­","í´ë ˆë¦­",2,3);

